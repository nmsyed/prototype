{"ast":null,"code":"import _slicedToArray from\"/var/www/html/proto/prototype/React-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _createForOfIteratorHelper from\"/var/www/html/proto/prototype/React-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"/var/www/html/proto/prototype/React-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/var/www/html/proto/prototype/React-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/var/www/html/proto/prototype/React-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/var/www/html/proto/prototype/React-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/* eslint-disable react/style-prop-object */ /* eslint-disable jsx-a11y/alt-text */ /* eslint-disable jsx-a11y/anchor-is-valid */ /* eslint-disable */import React,{Component}from\"react\";import Bubble from\"../Stats/Bubble\";import Bar from\"../Stats/Bar\";import Select from\"react-select\";import{HomeService}from\"../../_Services\";import\"./Transaction.css\";import MenuItems from\"../Menu/Menu\";import i18next from\"../../../i18n\";import{withTranslation}from\"react-i18next\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Transaction=/*#__PURE__*/function(_Component){_inherits(Transaction,_Component);var _super=_createSuper(Transaction);function Transaction(props){var _this;_classCallCheck(this,Transaction);_this=_super.call(this,props);_this.userStats=function(){HomeService.userStats().then(function(res){// console.log(res.data.data);\nvar stats=[];res.data.data.forEach(function(value){//  stats.push([value.programName, value.programStats]);\nstats.push(value);});_this.setState({fullstats:stats},function(){console.log(this.state.fullstats);this.filterTree(this.state.selectedOption.value);});}).catch(function(err){});};_this.filterTree=function(id){// var id = 1;\nvar treeData=_this.state.fullstats.filter(function(stat){return parseInt(id)===parseInt(stat.question);});var data=[];var dataStats=[];console.log(treeData);var prgms={};var speed={};var temp={};var extra={};var prgmTotal=0;var speedTotal=0;var tempTotal=0;var extraTotal=0;var _iterator=_createForOfIteratorHelper(treeData),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var i=_step.value;for(var _key4 in i){if(_key4!=\"pid\"&&_key4!=\"question\"&&_key4!=\"totalStats\"&&i[_key4]!=\"NONE\"){console.log(i[_key4]);if(_key4==\"programName\"){prgms[i[_key4]]=prgms[i[_key4]]==undefined?i[\"totalStats\"]:prgms[i[_key4]]+=i[\"totalStats\"];prgmTotal+=parseInt(i[\"totalStats\"]);}if(_key4==\"speed\"){speed[i[_key4]]=speed[i[_key4]]==undefined?i[\"totalStats\"]:speed[i[_key4]]+=i[\"totalStats\"];speedTotal+=parseInt(i[\"totalStats\"]);}if(_key4==\"temp\"){temp[i[_key4]]=temp[i[_key4]]==undefined?i[\"totalStats\"]:temp[i[_key4]]+=i[\"totalStats\"];tempTotal+=parseInt(i[\"totalStats\"]);}if(_key4==\"extraWash\"){extra[i[_key4]]=extra[i[_key4]]==undefined?i[\"totalStats\"]:extra[i[_key4]]+=i[\"totalStats\"];extraTotal+=parseInt(i[\"totalStats\"]);}}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}var pgmsArr=[];for(var _i=0,_Object$entries=Object.entries(prgms);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];value=Math.round(value/prgmTotal*100);pgmsArr.push({x:key,y:value});}var speedArr=[];for(var _i2=0,_Object$entries2=Object.entries(speed);_i2<_Object$entries2.length;_i2++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i2],2),_key=_Object$entries2$_i[0],_value=_Object$entries2$_i[1];_value=Math.round(_value/speedTotal*100);speedArr.push({x:_key,y:_value});}var tempArr=[];for(var _i3=0,_Object$entries3=Object.entries(temp);_i3<_Object$entries3.length;_i3++){var _Object$entries3$_i=_slicedToArray(_Object$entries3[_i3],2),_key2=_Object$entries3$_i[0],_value2=_Object$entries3$_i[1];_value2=Math.round(_value2/tempTotal*100);tempArr.push({x:_key2,y:_value2});}var extraArr=[];for(var _i4=0,_Object$entries4=Object.entries(extra);_i4<_Object$entries4.length;_i4++){var _Object$entries4$_i=_slicedToArray(_Object$entries4[_i4],2),_key3=_Object$entries4$_i[0],_value3=_Object$entries4$_i[1];_value3=Math.round(_value3/extraTotal*100);extraArr.push({x:_key3,y:_value3});}// console.log(prgms, speed, temp, extra);\nvar series=[];if(pgmsArr.length>0){series.push({name:\"Programme\",data:pgmsArr});}if(speedArr.length>0){series.push({name:\"Speed\",data:speedArr});}if(speedArr.length>0){series.push({name:\"Speed\",data:speedArr});}if(tempArr.length>0){series.push({name:\"Temperature\",data:tempArr});}if(tempArr.length>0){series.push({name:\"Extra Wash\",data:tempArr});}_this.setState({series:series});// for (let i of treeData) {\n//   // console.log(i);\n//   for (const key in i) {\n//     if (\n//       key != \"pid\" &&\n//       key != \"question\" &&\n//       key != \"totalStats\" &&\n//       i[key] != \"NONE\"\n//     ) {\n//       var txt = key + \" - \" + i[key];\n//       if (data[txt] == undefined) data[txt] = 0;\n//       data[txt] = parseInt(data[txt]) + parseInt(i[\"totalStats\"]);\n//     }\n//   }\n//   // console.log(data);\n//   // for (let [index, value] of i) {\n//   //   console.log(index, value);\n//   // }\n// }\n// for (const key in data) {\n//   // var txt = key + \":\" + data[key];\n//   dataStats.push({\n//     x: key,\n//     y: data[key],\n//   });\n//   //console.log(`${key}: ${i[key]}`);\n// }\n// console.log(dataStats);\n// this.setState({ data: dataStats });\n// console.log(data);\n//  console.log(treeData);\n};_this.handleChange=function(selectedOption){console.log(selectedOption);_this.setState({selectedOption:selectedOption},function(){this.filterTree(selectedOption.value);});// this.setState({ selectedOption }, () =>\n//  // console.log(`Option selected:`, this.state.selectedOption)\n// );\n};var t=props.t;console.log(t(\"Q1\"));_this.state={series:[],fullstats:{},selectedOption:{value:1,label:t(\"Q1\"),selected:false,program:[]},q:[{value:1,label:t(\"Q1\"),selected:false,program:[]},{value:2,label:t(\"Q2\"),selected:false,program:[]}]};return _this;}_createClass(Transaction,[{key:\"componentDidMount\",value:function componentDidMount(){this.userStats();}},{key:\"render\",value:function render(){var _this$state=this.state,selectedOption=_this$state.selectedOption,q=_this$state.q,series=_this$state.series;var t=this.props.t;selectedOption.label=t(selectedOption.label);q.forEach(function(v){v.label=t(v.label);});console.log(t(\"Q1\"));// console.log(JSON.stringify(series));\nreturn/*#__PURE__*/_jsxs(\"div\",{class:\"\",children:[/*#__PURE__*/_jsx(MenuItems,{}),/*#__PURE__*/_jsx(\"div\",{class:\"row full-width\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"charts\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h2\",{align:\"center\",children:t(\"Sample Visualizations\")}),/*#__PURE__*/_jsxs(\"div\",{class:\"row col-md-4 p-10\",children:[/*#__PURE__*/_jsx(\"label\",{class:\"q-label\",children:t(\"Select Question\")}),/*#__PURE__*/_jsx(Select,{value:selectedOption,onChange:this.handleChange,options:q})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Bubble,{data:series,selectedOption:selectedOption})]})})]});}}]);return Transaction;}(Component);export default withTranslation([\"translation\"])(Transaction);","map":{"version":3,"sources":["/var/www/html/proto/prototype/React-UI/src/Components/App/Transaction/Transaction.js"],"names":["React","Component","Bubble","Bar","Select","HomeService","MenuItems","i18next","withTranslation","Transaction","props","userStats","then","res","stats","data","forEach","value","push","setState","fullstats","console","log","state","filterTree","selectedOption","catch","err","id","treeData","filter","stat","parseInt","question","dataStats","prgms","speed","temp","extra","prgmTotal","speedTotal","tempTotal","extraTotal","i","key","undefined","pgmsArr","Object","entries","Math","round","x","y","speedArr","tempArr","extraArr","series","length","name","handleChange","t","label","selected","program","q","v"],"mappings":"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","sourcesContent":["/* eslint-disable react/style-prop-object */\n/* eslint-disable jsx-a11y/alt-text */\n/* eslint-disable jsx-a11y/anchor-is-valid */\n/* eslint-disable */\nimport React, { Component } from \"react\";\nimport Bubble from \"../Stats/Bubble\";\nimport Bar from \"../Stats/Bar\";\nimport Select from \"react-select\";\nimport { HomeService } from \"../../_Services\";\nimport \"./Transaction.css\";\nimport MenuItems from \"../Menu/Menu\";\nimport i18next from \"../../../i18n\";\nimport { withTranslation } from \"react-i18next\";\n\nclass Transaction extends Component {\n  constructor(props) {\n    super(props);\n    const { t } = props;\n\n    console.log(t(\"Q1\"));\n    this.state = {\n      series: [],\n      fullstats: {},\n      selectedOption: {\n        value: 1,\n\n        label: t(\"Q1\"),\n        selected: false,\n        program: [],\n      },\n      q: [\n        {\n          value: 1,\n\n          label: t(\"Q1\"),\n          selected: false,\n          program: [],\n        },\n        {\n          value: 2,\n          label: t(\"Q2\"),\n          selected: false,\n          program: [],\n        },\n      ],\n    };\n  }\n\n  userStats = () => {\n    HomeService.userStats()\n      .then((res) => {\n        // console.log(res.data.data);\n        var stats = [];\n        res.data.data.forEach(function (value) {\n          //  stats.push([value.programName, value.programStats]);\n          stats.push(value);\n        });\n\n        this.setState({ fullstats: stats }, function () {\n          console.log(this.state.fullstats);\n          this.filterTree(this.state.selectedOption.value);\n        });\n      })\n      .catch((err) => {});\n  };\n\n  filterTree = (id) => {\n    // var id = 1;\n    var treeData = this.state.fullstats.filter((stat) => {\n      return parseInt(id) === parseInt(stat.question);\n    });\n    var data = [];\n    var dataStats = [];\n    console.log(treeData);\n\n    const prgms = {};\n    const speed = {};\n    const temp = {};\n    const extra = {};\n    var prgmTotal = 0;\n    var speedTotal = 0;\n    var tempTotal = 0;\n    var extraTotal = 0;\n\n    for (let i of treeData) {\n      for (const key in i) {\n        if (\n          key != \"pid\" &&\n          key != \"question\" &&\n          key != \"totalStats\" &&\n          i[key] != \"NONE\"\n        ) {\n          console.log(i[key]);\n          if (key == \"programName\") {\n            prgms[i[key]] =\n              prgms[i[key]] == undefined\n                ? i[\"totalStats\"]\n                : (prgms[i[key]] += i[\"totalStats\"]);\n            prgmTotal += parseInt(i[\"totalStats\"]);\n          }\n\n          if (key == \"speed\") {\n            speed[i[key]] =\n              speed[i[key]] == undefined\n                ? i[\"totalStats\"]\n                : (speed[i[key]] += i[\"totalStats\"]);\n            speedTotal += parseInt(i[\"totalStats\"]);\n          }\n\n          if (key == \"temp\") {\n            temp[i[key]] =\n              temp[i[key]] == undefined\n                ? i[\"totalStats\"]\n                : (temp[i[key]] += i[\"totalStats\"]);\n            tempTotal += parseInt(i[\"totalStats\"]);\n          }\n          if (key == \"extraWash\") {\n            extra[i[key]] =\n              extra[i[key]] == undefined\n                ? i[\"totalStats\"]\n                : (extra[i[key]] += i[\"totalStats\"]);\n            extraTotal += parseInt(i[\"totalStats\"]);\n          }\n        }\n      }\n    }\n\n    var pgmsArr = [];\n    for (let [key, value] of Object.entries(prgms)) {\n      value = Math.round((value / prgmTotal) * 100);\n      pgmsArr.push({\n        x: key,\n        y: value,\n      });\n    }\n    var speedArr = [];\n    for (let [key, value] of Object.entries(speed)) {\n      value = Math.round((value / speedTotal) * 100);\n      speedArr.push({\n        x: key,\n        y: value,\n      });\n    }\n    var tempArr = [];\n    for (let [key, value] of Object.entries(temp)) {\n      value = Math.round((value / tempTotal) * 100);\n      tempArr.push({\n        x: key,\n        y: value,\n      });\n    }\n    var extraArr = [];\n    for (let [key, value] of Object.entries(extra)) {\n      value = Math.round((value / extraTotal) * 100);\n      extraArr.push({\n        x: key,\n        y: value,\n      });\n    }\n    // console.log(prgms, speed, temp, extra);\n    const series = [];\n    if (pgmsArr.length > 0) {\n      series.push({\n        name: \"Programme\",\n        data: pgmsArr,\n      });\n    }\n    if (speedArr.length > 0) {\n      series.push({\n        name: \"Speed\",\n        data: speedArr,\n      });\n    }\n    if (speedArr.length > 0) {\n      series.push({\n        name: \"Speed\",\n        data: speedArr,\n      });\n    }\n    if (tempArr.length > 0) {\n      series.push({\n        name: \"Temperature\",\n        data: tempArr,\n      });\n    }\n    if (tempArr.length > 0) {\n      series.push({\n        name: \"Extra Wash\",\n        data: tempArr,\n      });\n    }\n\n    this.setState({ series: series });\n    // for (let i of treeData) {\n    //   // console.log(i);\n\n    //   for (const key in i) {\n    //     if (\n    //       key != \"pid\" &&\n    //       key != \"question\" &&\n    //       key != \"totalStats\" &&\n    //       i[key] != \"NONE\"\n    //     ) {\n    //       var txt = key + \" - \" + i[key];\n\n    //       if (data[txt] == undefined) data[txt] = 0;\n    //       data[txt] = parseInt(data[txt]) + parseInt(i[\"totalStats\"]);\n    //     }\n    //   }\n    //   // console.log(data);\n\n    //   // for (let [index, value] of i) {\n    //   //   console.log(index, value);\n    //   // }\n    // }\n\n    // for (const key in data) {\n    //   // var txt = key + \":\" + data[key];\n\n    //   dataStats.push({\n    //     x: key,\n    //     y: data[key],\n    //   });\n    //   //console.log(`${key}: ${i[key]}`);\n    // }\n    // console.log(dataStats);\n    // this.setState({ data: dataStats });\n    // console.log(data);\n    //  console.log(treeData);\n  };\n\n  componentDidMount() {\n    this.userStats();\n  }\n\n  handleChange = (selectedOption) => {\n    console.log(selectedOption);\n    this.setState({ selectedOption: selectedOption }, function () {\n      this.filterTree(selectedOption.value);\n    });\n    // this.setState({ selectedOption }, () =>\n    //  // console.log(`Option selected:`, this.state.selectedOption)\n    // );\n  };\n\n  render() {\n    const { selectedOption, q, series } = this.state;\n    const { t } = this.props;\n\n    selectedOption.label = t(selectedOption.label);\n\n    q.forEach(function (v) {\n      v.label = t(v.label);\n    });\n\n    console.log(t(\"Q1\"));\n    // console.log(JSON.stringify(series));\n    return (\n      <div class=\"\">\n        <MenuItems />\n        <div class=\"row full-width\">\n          <div className=\"charts\">\n            <br />\n            <h2 align=\"center\">{t(\"Sample Visualizations\")}</h2>\n            <div class=\"row col-md-4 p-10\">\n              <label class=\"q-label\">{t(\"Select Question\")}</label>\n              <Select\n                value={selectedOption}\n                onChange={this.handleChange}\n                options={q}\n              />\n            </div>\n            <br />\n            <Bubble data={series} selectedOption={selectedOption} />\n\n            {/* <Bar series={series} selectedOption={selectedOption} /> */}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withTranslation([\"translation\"])(Transaction);\n"]},"metadata":{},"sourceType":"module"}