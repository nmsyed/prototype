{"ast":null,"code":"import _classCallCheck from\"/var/www/html/proto/prototype/React-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/var/www/html/proto/prototype/React-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/var/www/html/proto/prototype/React-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/var/www/html/proto/prototype/React-UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/* eslint-disable react/style-prop-object */ /* eslint-disable jsx-a11y/alt-text */ /* eslint-disable jsx-a11y/anchor-is-valid */ /* eslint-disable */import React,{Component}from\"react\";// import Bubble from \"../Stats/Bubble\";\nimport Bar from\"../Stats/Bar\";import Select from\"react-select\";import{HomeService}from\"../../_Services\";import\"./Transaction.css\";import MenuItems from\"../Menu/Menu\";import{withTranslation}from\"react-i18next\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserTransaction=/*#__PURE__*/function(_Component){_inherits(UserTransaction,_Component);var _super=_createSuper(UserTransaction);function UserTransaction(props){var _this;_classCallCheck(this,UserTransaction);_this=_super.call(this,props);_this.userStats=function(){HomeService.userTransactions().then(function(res){// console.log(res.data.data);\nvar stats=[];console.log(\"testtttttttt\");_this.setState({fullstats:res.data.data},function(){this.filterTree(1);});// console.log(\"jjjjjjjjjjjj\");\n// console.log(this.state);\n// this.setState({ fullstats: stats }, function () {\n//   console.log(this.state.fullstats);\n//   this.filterTree(this.state.selectedOption.value);\n// });\n}).catch(function(err){});};_this.filterTree=function(id){// var id = 1;\nvar treeData=_this.state.fullstats.filter(function(stat){return parseInt(id)===parseInt(stat.question);});var series=[];var seriesData=[];var inc=1;treeData.forEach(function(value){//  stats.push([value.programName, value.programStats]);\nconsole.log(value);var act=JSON.parse(value.activity);console.log(act);var millis=parseFloat(act.endTime-act.startTime);var minutes=Math.floor(millis/60000);var seconds=(millis%60000/1000).toFixed(0);var duration=minutes+\".\"+(seconds<10?\"0\":\"\")+seconds;console.log(duration);seriesData.push(duration);series.push(\"User-\"+inc);inc++;console.log(\"hel\");//stats.push(value);\n});_this.setState({seriesData:seriesData,series:series});};_this.handleChange=function(selectedOption){console.log(selectedOption);_this.setState({selectedOption:selectedOption},function(){this.filterTree(selectedOption.value);});// this.setState({ selectedOption }, () =>\n//  // console.log(`Option selected:`, this.state.selectedOption)\n// );\n};var t=_this.props.t;_this.state={series:[],seriesData:[],fullstats:[],selectedOption:{value:1,label:t(\"Q1\"),selected:false,program:[]},q:[{value:1,label:t(\"Q1\"),selected:false,program:[]},{value:2,label:t(\"Q2\"),selected:false,program:[]}]};return _this;}_createClass(UserTransaction,[{key:\"componentDidMount\",value:function componentDidMount(){this.userStats();}},{key:\"render\",value:function render(){var _this$state=this.state,selectedOption=_this$state.selectedOption,q=_this$state.q,series=_this$state.series,seriesData=_this$state.seriesData;var t=this.props.t;selectedOption.label=t(selectedOption.label);q.forEach(function(v){v.label=t(v.label);});// console.log(JSON.stringify(series));\nreturn/*#__PURE__*/_jsxs(\"div\",{class:\"\",children:[/*#__PURE__*/_jsx(MenuItems,{}),/*#__PURE__*/_jsx(\"div\",{class:\"row full-width\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"charts\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h2\",{align:\"center\",children:t(\"Sample Visualizations\")}),/*#__PURE__*/_jsxs(\"div\",{class:\"row col-md-4 p-30\",children:[/*#__PURE__*/_jsx(\"label\",{class:\"q-label\",children:t(\"Select Question\")}),/*#__PURE__*/_jsx(Select,{value:selectedOption,onChange:this.handleChange,options:q})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Bar,{series:series,seriesData:seriesData,selectedOption:selectedOption})]})})]});}}]);return UserTransaction;}(Component);export default withTranslation([\"translation\"])(UserTransaction);","map":{"version":3,"sources":["/var/www/html/proto/prototype/React-UI/src/Components/App/Transaction/UserTransaction.js"],"names":["React","Component","Bar","Select","HomeService","MenuItems","withTranslation","UserTransaction","props","userStats","userTransactions","then","res","stats","console","log","setState","fullstats","data","filterTree","catch","err","id","treeData","state","filter","stat","parseInt","question","series","seriesData","inc","forEach","value","act","JSON","parse","activity","millis","parseFloat","endTime","startTime","minutes","Math","floor","seconds","toFixed","duration","push","handleChange","selectedOption","t","label","selected","program","q","v"],"mappings":"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","sourcesContent":["/* eslint-disable react/style-prop-object */\n/* eslint-disable jsx-a11y/alt-text */\n/* eslint-disable jsx-a11y/anchor-is-valid */\n/* eslint-disable */\nimport React, { Component } from \"react\";\n// import Bubble from \"../Stats/Bubble\";\nimport Bar from \"../Stats/Bar\";\nimport Select from \"react-select\";\nimport { HomeService } from \"../../_Services\";\nimport \"./Transaction.css\";\nimport MenuItems from \"../Menu/Menu\";\nimport { withTranslation } from \"react-i18next\";\n\nclass UserTransaction extends Component {\n  constructor(props) {\n    super(props);\n    const { t } = this.props;\n    this.state = {\n      series: [],\n      seriesData: [],\n      fullstats: [],\n      selectedOption: {\n        value: 1,\n\n        label: t(\"Q1\"),\n        selected: false,\n        program: [],\n      },\n      q: [\n        {\n          value: 1,\n\n          label: t(\"Q1\"),\n          selected: false,\n          program: [],\n        },\n        {\n          value: 2,\n          label: t(\"Q2\"),\n          selected: false,\n          program: [],\n        },\n      ],\n    };\n  }\n\n  userStats = () => {\n    HomeService.userTransactions()\n      .then((res) => {\n        // console.log(res.data.data);\n        var stats = [];\n\n        console.log(\"testtttttttt\");\n        this.setState({ fullstats: res.data.data }, function () {\n          this.filterTree(1);\n        });\n\n        // console.log(\"jjjjjjjjjjjj\");\n        // console.log(this.state);\n        // this.setState({ fullstats: stats }, function () {\n        //   console.log(this.state.fullstats);\n        //   this.filterTree(this.state.selectedOption.value);\n        // });\n      })\n      .catch((err) => {});\n  };\n\n  filterTree = (id) => {\n    // var id = 1;\n    var treeData = this.state.fullstats.filter((stat) => {\n      return parseInt(id) === parseInt(stat.question);\n    });\n    var series = [];\n    var seriesData = [];\n\n    var inc = 1;\n    treeData.forEach(function (value) {\n      //  stats.push([value.programName, value.programStats]);\n      console.log(value);\n      var act = JSON.parse(value.activity);\n      console.log(act);\n      var millis = parseFloat(act.endTime - act.startTime);\n      var minutes = Math.floor(millis / 60000);\n      var seconds = ((millis % 60000) / 1000).toFixed(0);\n      var duration = minutes + \".\" + (seconds < 10 ? \"0\" : \"\") + seconds;\n      console.log(duration);\n      seriesData.push(duration);\n      series.push(\"User-\" + inc);\n\n      inc++;\n      console.log(\"hel\");\n\n      //stats.push(value);\n    });\n    this.setState({\n      seriesData: seriesData,\n      series: series,\n    });\n  };\n\n  componentDidMount() {\n    this.userStats();\n  }\n\n  handleChange = (selectedOption) => {\n    console.log(selectedOption);\n    this.setState({ selectedOption: selectedOption }, function () {\n      this.filterTree(selectedOption.value);\n    });\n    // this.setState({ selectedOption }, () =>\n    //  // console.log(`Option selected:`, this.state.selectedOption)\n    // );\n  };\n\n  render() {\n    const { selectedOption, q, series, seriesData } = this.state;\n    const { t } = this.props;\n\n    selectedOption.label = t(selectedOption.label);\n\n    q.forEach(function (v) {\n      v.label = t(v.label);\n    });\n    // console.log(JSON.stringify(series));\n    return (\n      <div class=\"\">\n        <MenuItems />\n        <div class=\"row full-width\">\n          <div className=\"charts\">\n            <br />\n            <h2 align=\"center\">{t(\"Sample Visualizations\")}</h2>\n            <div class=\"row col-md-4 p-30\">\n              <label class=\"q-label\">{t(\"Select Question\")}</label>\n              <Select\n                value={selectedOption}\n                onChange={this.handleChange}\n                options={q}\n              />\n            </div>\n            <br />\n            {/* <Bubble series={series} selectedOption={selectedOption} /> */}\n\n            <Bar\n              series={series}\n              seriesData={seriesData}\n              selectedOption={selectedOption}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withTranslation([\"translation\"])(UserTransaction);\n"]},"metadata":{},"sourceType":"module"}